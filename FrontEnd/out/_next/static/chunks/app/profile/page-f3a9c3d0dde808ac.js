(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{5660:(e,t,r)=>{Promise.resolve().then(r.bind(r,7942))},232:(e,t,r)=>{"use strict";r.d(t,{J:()=>n,v:()=>i});var a=r(5155),l=r(2115);let s=(0,l.createContext)(),i=e=>{let{children:t}=e,[r,i]=(0,l.useState)(null);return(0,a.jsx)(s.Provider,{value:{user:r,setUser:i},children:t})},n=()=>(0,l.useContext)(s)},473:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var a=r(5155),l=r(8173),s=r.n(l),i=r(2115),n=r(6046),o=r(689),d=r(7936),c=r(232);let h=()=>{let e=(0,i.useRef)(null),[t,r]=(0,i.useState)(!1),[l,h]=(0,i.useState)(!1),{user:u,setUser:m}=(0,c.J)(),[x,p]=(0,i.useState)(""),g=(0,n.useRouter)(),b=(0,n.usePathname)(),f=e=>b===e||(null==b?void 0:b.startsWith("".concat(e,"/")));return(0,i.useEffect)(()=>{let t=t=>{e.current&&!e.current.contains(t.target)&&r(!1)};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]),(0,a.jsxs)("nav",{className:"p-4 fixed top-0 left-0 w-full z-50 bg-white transition-colors duration-300",children:[(0,a.jsxs)("div",{className:"container mx-auto flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2 space-x-reverse",children:(0,a.jsx)("img",{src:"/images/SuqiaLogo.PNG",alt:"سقيا Logo",style:{width:100}})}),(0,a.jsxs)("ul",{className:"hidden md:flex items-center bg-gray-100 rounded-full px-4 py-2 space-x-4 space-x-reverse",children:[(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white transition-all ".concat(f("/")?"bg-white":""),children:"الرئيسية"})}),(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/about",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white transition-all ".concat(f("/about")?"bg-white":""),children:"من نحن"})}),u&&"user"==u.rank&&(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/DistributersRequest",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white transition-all ".concat(f("/DistributersRequest")?"bg-white":""),children:"تسجيل السائقين"})}),(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/contact",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white transition-all ".concat(f("/contact")?"bg-white":""),children:"فريقنا"})}),(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/order",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white transition-all ".concat(f("/order")?"bg-white":""),children:"اطلب الان"})})]}),x&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-2",children:x}),u?(0,a.jsxs)("div",{className:"relative hidden md:block",children:[(0,a.jsxs)("button",{className:"bg-[#38B6FF] text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-[#29A5F2] flex items-center",onClick:()=>r(!t),children:["حسابك",(0,a.jsx)("svg",{className:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),t&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10",children:["user"==u.rank&&(0,a.jsx)(s(),{href:"/myDonations",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"تبرعاتي"}),"distributer"==u.rank&&(0,a.jsx)(s(),{href:"/dashboard/home",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"لوحة التحكم"}),"admin"==u.rank&&(0,a.jsx)(s(),{href:"/admin/home",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"لوحة التحكم"}),(0,a.jsx)(s(),{href:"/profile",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"الملف الشخصي"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),m(null),g.push("/login")},className:"block w-full text-right px-4 py-2 text-gray-700 hover:bg-gray-100",children:"تسجيل الخروج"})]})]}):(0,a.jsx)(s(),{href:"/login",className:"hidden md:block bg-[#38B6FF] text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-[#29A5F2]",children:"تسجيل الدخول"}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)("button",{className:"text-gray-700 focus:outline-none",onClick:()=>{h(!l)},children:l?(0,a.jsx)(o.A,{className:"w-6 h-6"}):(0,a.jsx)(d.A,{className:"w-6 h-6"})})})]}),(0,a.jsxs)("ul",{className:"md:hidden flex-col items-center bg-gray-100 px-4 py-2 mt-4 space-y-4 ".concat(l?"flex":"hidden"),children:[(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"الرئيسية"})}),u&&"user"==u.rank&&(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/DistributersRequest",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all ".concat(f("/DistributersRequest")?"bg-white":""),children:"تسجيل السائقين"})}),(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/contact",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"فريقنا"})}),(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/order",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"اطلب الان"})}),u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{}),(0,a.jsxs)("li",{children:["user"==u.rank&&(0,a.jsx)(s(),{href:"/myDonations",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"تبرعاتي"}),"distributer"==u.rank&&(0,a.jsx)(s(),{href:"/dashboard/home",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"لوحة التحكم"}),"admin"==u.rank&&(0,a.jsx)(s(),{href:"/admin/home",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"لوحة التحكم"})]}),(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/profile",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"الملف الشخصي"})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),m(null),g.push("/login")},className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"تسجيل الخروج"})})]}):(0,a.jsx)("li",{children:(0,a.jsx)(s(),{href:"/login",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"تسجيل الدخول"})})]})]})}},7942:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),l=r(2115),s=r(2651),i=r(232),n=r(6046),o=r(473);function d(){let{user:e,setUser:t}=(0,i.J)(),[r,d]=(0,l.useState)(!1),[c,h]=(0,l.useState)(!1),[u,m]=(0,l.useState)(""),[x,p]=(0,l.useState)({fullname:(null==e?void 0:e.fullname)||"",email:(null==e?void 0:e.email)||"",phoneNumber:(null==e?void 0:e.phoneNumber)||"",city:(null==e?void 0:e.city)||"",district:(null==e?void 0:e.district)||"",drive_licence_number:(null==e?void 0:e.drive_licence_number)||""}),[g,b]=(0,l.useState)(x),f=(0,n.useRouter)();(0,l.useEffect)(()=>{localStorage.getItem("user")||f.push("/login"),(async()=>{try{let a=JSON.parse(localStorage.getItem("user")),l=a?a.email:null,i="".concat("http://localhost:2000","/api/profile?email=").concat(l),n=await s.A.get(i),o={fullname:n.data.fullname,email:n.data.email,phoneNumber:n.data.phoneNumber,city:"",district:"",drive_licence_number:""};if("distributer"===a.rank&&n.data.distributer){var e,t,r;o.city=null!==(e=n.data.distributer.city)&&void 0!==e?e:"",o.district=null!==(t=n.data.distributer.district)&&void 0!==t?t:"",o.drive_licence_number=null!==(r=n.data.distributer.drive_licence_number)&&void 0!==r?r:""}b(o)}catch(e){console.error("Error fetching user data:",e)}})()},[]),(0,l.useEffect)(()=>{p({...g})},[g]);let y=async e=>{if(e.preventDefault(),!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(x.email)){m("الرجاء التأكد من صحة البريد الإلكتروني ورقم الهاتف");return}if(!/^\d{10}$/.test(x.phoneNumber)){m("الرجاء التأكد من صحة رقم الهاتف");return}try{let e=JSON.parse(localStorage.getItem("user")),r=e?e.email:null,a="".concat("http://localhost:2000","/api/profile?email=").concat(r),l={newEmail:x.email,fullname:x.fullname,phoneNumber:x.phoneNumber};if(e&&"distributer"===e.rank&&(l.city=x.city,l.district=x.district,l.drive_licence_number=x.drive_licence_number),await s.A.put(a,l),b(x),d(!1),h(!0),r!==x.email){let r={...e,...x};localStorage.setItem("user",JSON.stringify(r)),t(r)}m("")}catch(e){var r,a;m((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"حدث خطأ أثناء تحديث البيانات")}},v=e=>{let{name:t,value:r}=e.target;"phone"===t&&r.length>10||p({...x,[e.target.name]:e.target.value})};return(0,l.useEffect)(()=>{if(c){let e=setTimeout(()=>h(!1),3e3);return()=>clearTimeout(e)}},[c]),(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-sky-100 to-blue-50 py-12 px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)(o.A,{}),(0,a.jsx)("div",{className:"max-w-3xl mx-auto transform transition-all duration-300",children:(0,a.jsxs)("div",{className:"relative bg-white rounded-[2rem] shadow-2xl overflow-hidden ring-1 ring-black/5 hover:shadow-2xl transition-shadow duration-300",children:[c&&(0,a.jsx)("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 z-50 animate-fade-in",children:(0,a.jsxs)("div",{className:"bg-white border-2 border-emerald-100 rounded-xl px-6 py-4 shadow-2xl flex items-center space-x-4 backdrop-blur-sm",children:[(0,a.jsx)("div",{className:"bg-emerald-50 p-2 rounded-full",children:(0,a.jsx)("svg",{className:"h-6 w-6 text-emerald-600 animate-check",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-bold text-emerald-700",children:"!تم تحديث الملف الشخصي "}),(0,a.jsx)("p",{className:"text-xs text-emerald-500",children:"تم حفظ التغييرات بنجاح "})]})]})}),(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-sky-700 to-sky-600 pt-20 pb-24 px-8 group",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-noise opacity-10 mix-blend-overlay"}),(0,a.jsx)("div",{className:"absolute -bottom-14 left-8 transform transition-transform duration-300 group-hover:-translate-y-2",children:(0,a.jsx)("div",{className:"relative group",children:(0,a.jsx)("div",{className:"w-32 h-32 rounded-2xl border-4 border-white bg-sky-100 shadow-2xl overflow-hidden transition-all duration-300 hover:scale-105 hover:shadow-2xl",children:(0,a.jsx)("svg",{className:"w-full h-full text-sky-300 p-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})})}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-white tracking-tighter mt-8 opacity-90",children:g.fullname})]}),(0,a.jsxs)("form",{onSubmit:y,className:"pt-20 px-8 pb-8",children:[(0,a.jsx)("div",{className:"space-y-8",children:["fullname","email","phoneNumber"].map(e=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("input",{id:e,name:e,value:x[e],onChange:v,disabled:!r,className:"peer w-full px-6 py-5 rounded-2xl border-2 ".concat(r?"border-gray-200 hover:border-sky-300 focus:border-sky-400 text-gray-900":"border-gray-100 text-gray-500"," \n                     bg-gray-50 focus:ring-4 focus:ring-sky-100 focus:bg-white transition-all duration-300 disabled:cursor-not-allowed placeholder-transparent"),placeholder:" "}),(0,a.jsxs)("label",{htmlFor:e,className:"absolute right-6 -top-3.5 bg-white px-2 text-sm font-semibold drtl  ".concat(r?"text-sky-600":"text-gray-400"," transition-all duration-300 transform ").concat(!r&&"peer-placeholder-shown:translate-y-9 peer-placeholder-shown:text-base"," peer-placeholder-shown:text-gray-400 peer-focus:-top-3.5 peer-focus:text-sm peer-focus:text-sky-600"),children:["fullname"===e&&"الاسم الكامل","email"===e&&"البريد الإلكتروني","phoneNumber"===e&&"رقم الهاتف"]})]},e))}),(0,a.jsx)("br",{}),e&&"distributer"==e.rank?(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-black",children:"بيانات السائق"}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"space-y-8",children:["city","district","drive_licence_number"].map(e=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("input",{id:e,name:e,value:x[e],onChange:v,disabled:!r,className:"peer w-full px-6 py-5 rounded-2xl border-2 ".concat(r?"border-gray-200 hover:border-sky-300 focus:border-sky-400 text-gray-900":"border-gray-100 text-gray-500"," \n           bg-gray-50 focus:ring-4 focus:ring-sky-100 focus:bg-white transition-all duration-300 disabled:cursor-not-allowed placeholder-transparent"),placeholder:" "}),(0,a.jsxs)("label",{htmlFor:e,className:"absolute right-6 -top-3.5 bg-white px-2 text-sm font-semibold drtl  ".concat(r?"text-sky-600":"text-gray-400"," transition-all duration-300 transform ").concat(!r&&"peer-placeholder-shown:translate-y-9 peer-placeholder-shown:text-base"," peer-placeholder-shown:text-gray-400 peer-focus:-top-3.5 peer-focus:text-sm peer-focus:text-sky-600"),children:["city"===e&&"المدينة","district"===e&&"الحي","drive_licence_number"===e&&"رقم رخصة القيادة"]})]},e))})]}):(0,a.jsx)("div",{}),u&&(0,a.jsxs)("p",{className:"text-red-500 text-sm mt-2",children:[u,(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]}),(0,a.jsx)("div",{className:"mt-12 flex justify-end space-x-4",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{p({...g}),d(!1)},className:"px-8 py-4 rounded-xl bg-gray-100 text-gray-600 font-semibold hover:bg-gray-200 hover:scale-[1.02] transition-all duration-300 group",children:[(0,a.jsx)("span",{className:"inline-block group-hover:animate-shake",children:"❌"}),(0,a.jsx)("span",{className:"ml-3",children:"إلغاء التغييرات "})]}),(0,a.jsxs)("button",{type:"submit",className:"px-8 py-4 rounded-xl bg-gradient-to-r from-sky-500 to-sky-400 text-white font-semibold shadow-lg hover:shadow-sky-200/50 hover:scale-[1.02] transition-all duration-300 group",children:[(0,a.jsx)("span",{className:"inline-block group-hover:animate-bounce",children:"\uD83D\uDCBE"}),(0,a.jsx)("span",{className:"ml-3",children:"حفظ التغييرات"})]})]}):(0,a.jsxs)("button",{type:"button",onClick:()=>d(!0),className:"px-8 py-4 rounded-xl bg-gradient-to-r from-sky-500 to-sky-400 text-white font-semibold shadow-lg hover:shadow-sky-200/50 hover:scale-[1.02] transition-all duration-300 group",children:[(0,a.jsx)("span",{className:"inline-block group-hover:animate-wiggle",children:"✏️"}),(0,a.jsx)("span",{className:"ml-3",children:"تعديل الملف الشخصي "})]})})]})]})})]})}},7936:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(4057).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},689:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(4057).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[616,651,441,517,358],()=>t(5660)),_N_E=e.O()}]);