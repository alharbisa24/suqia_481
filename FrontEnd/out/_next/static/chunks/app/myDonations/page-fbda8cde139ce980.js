(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[352],{9200:(e,t,s)=>{Promise.resolve().then(s.bind(s,2586))},33:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(5155),r=s(2115),l=s(6046),i=s(232);let n=e=>{let{allowedRoles:t,children:s,redirectTo:n="/"}=e,{user:d}=(0,i.J)(),c=(0,l.useRouter)(),[o,m]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){c.push("/login");return}let s=JSON.parse(e).rank;if(!t.includes(s)){c.push(n);return}m(!1)},[d,t,n,c]),o)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):s}},232:(e,t,s)=>{"use strict";s.d(t,{J:()=>n,v:()=>i});var a=s(5155),r=s(2115);let l=(0,r.createContext)(),i=e=>{let{children:t}=e,[s,i]=(0,r.useState)(null);return(0,a.jsx)(l.Provider,{value:{user:s,setUser:i},children:t})},n=()=>(0,r.useContext)(l)},2586:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(5155),r=s(2115),l=s(8173),i=s.n(l),n=s(1536),d=s(232),c=s(2651);s(862);var o=s(6046),m=s(473),h=s(33);function x(){let{user:e,setUser:t}=(0,d.J)(),s=(0,o.useRouter)(),[l,h]=(0,r.useState)([]),[x,g]=(0,r.useState)(null),[p,f]=(0,r.useState)(!1),[b,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{localStorage.getItem("user")||s.push("/"),(async()=>{try{let e=localStorage.getItem("user");if(e){let s=JSON.parse(e);t(s);let a=await c.A.post("".concat("http://localhost:2000","/userEmail"),{email:s.email});a.data&&a.data._id?g(a.data._id):console.error("User not found")}}catch(e){console.error("Failed to parse user from localStorage or fetch user ID:",e)}})()},[]),(0,r.useEffect)(()=>{if(!x){console.warn("User ID not available yet. Waiting...");return}(async()=>{f(!0);try{let e="".concat("http://localhost:2000","/orders?userId=").concat(x),t=await c.A.get(e);console.log("Orders Response:",t.data),h(t.data)}catch(t){var e;console.error("Error fetching orders:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message)}finally{f(!1)}})()},[x]);let v=e=>{switch(e.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"waiting":return"bg-yellow-100 text-yellow-800";case"canceled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=e=>{switch(e.toLowerCase()){case"completed":return"مكتمل";case"waiting":return"قيد المراجعة";case"canceled":return"ملغي";default:return"غير معرف"}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 py-4 md:py-8 px-3 sm:px-4 lg:px-8",children:[(0,a.jsx)(m.A,{}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6 md:mb-8 flex flex-col md:flex-row justify-center items-center gap-3 md:gap-4",children:[(0,a.jsx)("div",{className:"text-sky-400 p-2 md:p-3 rounded-full bg-sky-50",children:(0,a.jsx)(n._oH,{className:"h-6 w-6 md:h-8 md:w-8"})}),(0,a.jsxs)("div",{className:"text-center md:text-right",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"تبرعاتي"}),(0,a.jsx)("p",{className:"mt-1 md:mt-2 text-sm md:text-base text-gray-600",children:"بعطائكم يستمر الخير"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:l.map((e,t)=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-200",children:(0,a.jsxs)("div",{className:"p-4 md:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col-reverse md:flex-row items-start md:items-center justify-between gap-3 md:gap-4 mb-3 md:mb-4",children:[(0,a.jsx)("div",{className:"w-full md:w-auto",children:(0,a.jsx)("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-4",children:(0,a.jsx)("h3",{className:"text-base md:text-lg font-semibold text-gray-900",children:"رقم الطلب "+e.order_id})})}),(0,a.jsx)("span",{className:"px-2 md:px-3 py-1 text-xs md:text-sm rounded-full font-medium ".concat(v(e.status)),children:y(e.status)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 border-t pt-3 md:pt-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u,{label:"الشركة",value:e.company}),(0,a.jsx)(u,{label:"الحجم",value:e.selectedSize})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u,{label:"الكمية",value:e.quantity}),(0,a.jsx)(u,{label:"تاريخ الطلب",value:new Date(e.created_at).toISOString().split("T")[0].split("-").reverse().join("-")})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u,{label:"الإجمالي",value:(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[e.totalPrice,(0,a.jsx)("img",{className:"h-4 md:h-5 w-auto inline-block",src:"images/Saudi_Riyal_Symbol.svg",alt:"ريال سعودي"})]})}),(0,a.jsx)(u,{label:"وقت الطلب",value:new Date(e.created_at).toLocaleTimeString("ar-GB",{hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u,{label:"العنوان",value:"".concat(e.city," - ").concat(e.district," - ").concat(e.street)}),(0,a.jsx)(u,{label:"اسم المسجد",value:e.mosque})]}),"completed"==e.status&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs md:text-sm text-gray-900",children:"صورة التسليم"}),(0,a.jsx)("img",{src:"".concat(e.image),alt:"صورة التسليم",className:"h-20 w-20 object-cover rounded-lg border"})]}),";"]})]})},t))}),0===l.length&&(0,a.jsxs)("div",{className:"text-center py-8 md:py-12",children:[(0,a.jsx)("div",{className:"mb-4 text-sky-400",children:(0,a.jsx)("svg",{className:"mx-auto h-10 w-10 md:h-12 md:w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,a.jsx)("h3",{className:"text-lg md:text-xl font-medium text-gray-900",children:"ليس لديك أي تبرع!"}),(0,a.jsx)("div",{className:"mt-3 md:mt-4",children:(0,a.jsx)(i(),{href:"/order",children:(0,a.jsx)("button",{className:"bg-[#38B6FF] text-white text-sm md:text-base font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-[#29A5F2]",children:"ابدأ رحلة الخير"})})})]})]})]})}let u=e=>{let{label:t,value:s}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs md:text-sm text-gray-900",children:t}),(0,a.jsx)("p",{className:"text-sm md:text-base font-medium text-gray-900",children:s})]})};function g(){return(0,a.jsx)(h.A,{allowedRoles:["user"],redirectTo:"/",children:(0,a.jsx)(x,{})})}},473:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var a=s(5155),r=s(8173),l=s.n(r),i=s(2115),n=s(6046),d=s(689),c=s(7936),o=s(232);let m=()=>{let e=(0,i.useRef)(null),[t,s]=(0,i.useState)(!1),[r,m]=(0,i.useState)(!1),{user:h,setUser:x}=(0,o.J)(),[u,g]=(0,i.useState)(""),p=(0,n.useRouter)(),f=(0,n.usePathname)(),b=e=>f===e||(null==f?void 0:f.startsWith("".concat(e,"/")));return(0,i.useEffect)(()=>{let t=t=>{e.current&&!e.current.contains(t.target)&&s(!1)};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]),(0,a.jsxs)("nav",{className:"p-4 fixed top-0 left-0 w-full z-50 bg-white transition-colors duration-300",children:[(0,a.jsxs)("div",{className:"container mx-auto flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2 space-x-reverse",children:(0,a.jsx)("img",{src:"/images/SuqiaLogo.PNG",alt:"سقيا Logo",style:{width:100}})}),(0,a.jsxs)("ul",{className:"hidden md:flex items-center bg-gray-100 rounded-full px-4 py-2 space-x-4 space-x-reverse",children:[(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white transition-all ".concat(b("/")?"bg-white":""),children:"الرئيسية"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/about",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white transition-all ".concat(b("/about")?"bg-white":""),children:"من نحن"})}),h&&"user"==h.rank&&(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/DistributersRequest",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white transition-all ".concat(b("/DistributersRequest")?"bg-white":""),children:"تسجيل السائقين"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/contact",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white transition-all ".concat(b("/contact")?"bg-white":""),children:"فريقنا"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/order",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white transition-all ".concat(b("/order")?"bg-white":""),children:"اطلب الان"})})]}),u&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-2",children:u}),h?(0,a.jsxs)("div",{className:"relative hidden md:block",children:[(0,a.jsxs)("button",{className:"bg-[#38B6FF] text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-[#29A5F2] flex items-center",onClick:()=>s(!t),children:["حسابك",(0,a.jsx)("svg",{className:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),t&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10",children:["user"==h.rank&&(0,a.jsx)(l(),{href:"/myDonations",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"تبرعاتي"}),"distributer"==h.rank&&(0,a.jsx)(l(),{href:"/dashboard/home",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"لوحة التحكم"}),"admin"==h.rank&&(0,a.jsx)(l(),{href:"/admin/home",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"لوحة التحكم"}),(0,a.jsx)(l(),{href:"/profile",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:"الملف الشخصي"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),x(null),p.push("/login")},className:"block w-full text-right px-4 py-2 text-gray-700 hover:bg-gray-100",children:"تسجيل الخروج"})]})]}):(0,a.jsx)(l(),{href:"/login",className:"hidden md:block bg-[#38B6FF] text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-[#29A5F2]",children:"تسجيل الدخول"}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)("button",{className:"text-gray-700 focus:outline-none",onClick:()=>{m(!r)},children:r?(0,a.jsx)(d.A,{className:"w-6 h-6"}):(0,a.jsx)(c.A,{className:"w-6 h-6"})})})]}),(0,a.jsxs)("ul",{className:"md:hidden flex-col items-center bg-gray-100 px-4 py-2 mt-4 space-y-4 ".concat(r?"flex":"hidden"),children:[(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"الرئيسية"})}),h&&"user"==h.rank&&(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/DistributersRequest",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all ".concat(b("/DistributersRequest")?"bg-white":""),children:"تسجيل السائقين"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/contact",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"فريقنا"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/order",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"اطلب الان"})}),h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{}),(0,a.jsxs)("li",{children:["user"==h.rank&&(0,a.jsx)(l(),{href:"/myDonations",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"تبرعاتي"}),"distributer"==h.rank&&(0,a.jsx)(l(),{href:"/dashboard/home",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"لوحة التحكم"}),"admin"==h.rank&&(0,a.jsx)(l(),{href:"/admin/home",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"لوحة التحكم"})]}),(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/profile",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"الملف الشخصي"})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),x(null),p.push("/login")},className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"تسجيل الخروج"})})]}):(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/login",className:"text-gray-700 font-medium px-4 py-1 rounded-full hover:bg-white active:bg-white transition-all",children:"تسجيل الدخول"})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[711,616,651,507,441,517,358],()=>t(9200)),_N_E=e.O()}]);