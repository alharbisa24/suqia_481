(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[798],{3848:(e,s,t)=>{Promise.resolve().then(t.bind(t,3208))},3208:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var r=t(5155),a=t(8173),l=t.n(a),i=t(2115),c=t(2651),d=t(6046),n=t(209);t(1092);var o=t(689),x=t(437),h=t(7493),m=t(3100),p=t(8639),u=t(9266),y=t(9327),g=t(5763),j=t(1354),v=t(7936);function f(){let[e,s]=(0,i.useState)(!1),[t,a]=(0,i.useState)([]),[f,N]=(0,i.useState)(""),[b,w]=(0,i.useState)(null),[k,C]=(0,i.useState)(!1);(0,i.useEffect)(()=>{window.notyf=new n.zT({duration:5e3,position:{x:"left",y:"top"},types:[{type:"success",background:"green",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",background:"#ff5e5e",icon:{className:"notyf__icon--error",tagName:"i"}}]})},[]);let A=(0,d.useRouter)(),[M,S]=(0,i.useState)([]),[_,z]=(0,i.useState)(null),[L,H]=(0,i.useState)(""),q=async()=>{try{let e=await c.A.get("".concat("http://localhost:2000","/distributers_all_completed_orders"));S(e.data)}catch(s){var e;console.error("Error fetching orders:",(null===(e=s.response)||void 0===e?void 0:e.data)||s.message)}finally{}};(0,i.useEffect)(()=>{let e=localStorage.getItem("user");z(e?JSON.parse(e):null),q()},[]),(0,i.useEffect)(()=>{(null==_?void 0:_.id)&&"user"==_.rank&&A.push("/")},[_]);let[E,O]=(0,i.useState)("new"),[R,B]=(0,i.useState)(null),[I,V]=(0,i.useState)(null),[P,Z]=(0,i.useState)(!1),[D,T]=(0,i.useState)(null),[W,G]=(0,i.useState)(!1),[J,U]=(0,i.useState)(!1),[X,F]=(0,i.useState)(!1),K=M.filter(e=>{var s;return null==e?void 0:null===(s=e.order_id)||void 0===s?void 0:s.toString().includes(L)}),Q=async e=>{if(window.confirm("هل أنت متأكد من رغبتك في حذف هذا الطلب؟"))try{let s=await c.A.post("".concat("http://localhost:2000","/deleteOrder"),{orderId:e});200===s.status&&(window.notyf.success("تم حذف الطلب بنجاح"),q())}catch(e){var s,t;console.error("Error deleting order:",e),window.notyf.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"حدث خطأ أثناء حذف الطلب")}};return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[X&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>F(!1)}),(0,r.jsxs)("div",{className:"fixed top-0 right-0 h-full w-72 bg-white shadow-xl z-50 transition-transform duration-300 ease-in-out overflow-y-auto ".concat(X?"translate-x-0":"translate-x-full md:translate-x-0"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-100",children:[(0,r.jsx)("button",{onClick:()=>F(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-100",children:(0,r.jsx)(o.A,{size:20})}),(0,r.jsx)("h2",{className:"text-xl font-bold text-blue-600",children:"لوحة تحكم "})]}),(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse mb-6",children:[(0,r.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,r.jsx)(x.A,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"مرحباً بك"}),(0,r.jsx)("p",{className:"font-medium text-gray-400",children:null==_?void 0:_.fullname})]})]})}),(0,r.jsxs)("nav",{className:"flex-1 p-5",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-400 mb-3 pr-3",children:"القائمة الرئيسية"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)(l(),{href:"/admin/home",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(h.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"الرئيسية"})]}),(0,r.jsxs)(l(),{href:"/admin/new_orders",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(m.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"الطلبات الجديدة"})]}),(0,r.jsxs)(l(),{href:"/admin/orders",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg bg-blue-50 text-blue-600 font-medium",children:[(0,r.jsx)(p.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"الطلبات المكتملة"})]}),(0,r.jsxs)(l(),{href:"/admin/distributers",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(u.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"السائقون"})]}),(0,r.jsxs)(l(),{href:"/admin/customers",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(x.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"العملاء"})]}),(0,r.jsxs)(l(),{href:"/admin/distributers_requests",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(y.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"طلبات السائقين"})]}),(0,r.jsxs)(l(),{href:"/admin/companies",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(g.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"الشركات"})]})]}),(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-400 mt-8 mb-3 pr-3",children:"الإعدادات"}),(0,r.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),z(null),A.push("/login")},className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors w-full",children:[(0,r.jsx)(j.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"تسجيل خروج"})]})]})]}),(0,r.jsxs)("div",{className:"flex-grow transition-all duration-300 md:mr-72",children:[(0,r.jsx)("button",{className:"p-2 rounded-lg hover:bg-gray-100 md:hidden",onClick:()=>F(!X),children:(0,r.jsx)(v.A,{className:"w-6 h-6 text-gray-600"})}),(0,r.jsxs)("main",{className:"p-6",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"الطلبات المكتملة"})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:(0,r.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,r.jsx)("input",{type:"text",placeholder:"ابحث برقم الطلب",value:L,onChange:e=>H(e.target.value),className:"w-full px-4 py-2.5 pr-10 border-2 border-gray-200 rounded-lg text-right focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-colors"}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,r.jsx)("div",{className:"overflow-x-auto -mx-6",children:(0,r.jsx)("div",{className:"inline-block min-w-full align-middle px-6",children:(0,r.jsxs)("div",{className:"overflow-hidden border border-gray-200 md:rounded-lg",children:[(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"رقم الطلب"}),(0,r.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700 min-w-[260px]",children:"تفاصيل الطلب"}),(0,r.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"صورة التسليم"}),(0,r.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"المبلغ"}),(0,r.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"الحالة"}),(0,r.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"بيانات السائق"}),(0,r.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"تاريخ التسليم"}),(0,r.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"اجراء"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:K.length>0?K.map((e,s)=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["#",e.order_id]})})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-900",children:["كرتون ماء ",e.selectedSize]}),(0,r.jsxs)("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-800",children:[e.quantity," كرتون"]})]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.company}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:[e.city," - ",e.district," - ",e.street]}),(0,r.jsx)("div",{className:"text-sm font-medium text-gray-700",children:e.mosque})]})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("div",{className:"relative group",children:(0,r.jsx)("img",{src:e.image,alt:"صورة التسليم",className:"h-20 w-20 object-cover rounded-md border border-gray-200 transition-transform group-hover:scale-105 cursor-pointer",onClick:()=>window.open(e.image,"_blank")})})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1 space-x-reverse",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.totalPrice}),(0,r.jsx)("img",{className:"h-4 w-auto",src:"/images/Saudi_Riyal_Symbol.svg",alt:"ريال سعودي"})]})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-3 py-1 text-xs rounded-full bg-green-100 text-green-800 font-medium",children:"مكتمل"})}),(0,r.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.distributer_id.fullname}),(0,r.jsxs)("a",{href:"https://wa.me/966".concat(e.distributer_id.phoneNumber),target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-600 hover:text-green-800 hover:underline flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 ml-1.5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5027 3.4863C18.2578 1.2411 15.2495 0.00291443 12.0566 0C5.46537 0 0.116463 5.34891 0.114588 11.9402C0.11365 14.0485 0.648988 16.1022 1.67608 17.9258L0 24.0026L6.2218 22.3593C7.97833 23.2887 9.9584 23.7769 11.9778 23.7778H11.9822C18.5729 23.7778 23.9226 18.4278 23.9245 11.8365C23.9262 8.65467 22.7476 5.73152 20.5027 3.4863ZM12.0566 21.7825H12.0528C10.2717 21.7816 8.52645 21.3122 6.99009 20.4332L6.62583 20.2226L2.86823 21.1706L3.83308 17.5016L3.60112 17.1239C2.63655 15.5318 2.10926 13.6743 2.10989 11.9411C2.11239 6.44531 6.56091 1.9968 12.0604 1.9968C14.7306 1.9987 17.2679 3.03639 19.1251 4.8937C20.9824 6.75102 22.019 9.28706 22.0177 12.0346C22.0133 17.5313 17.5657 21.7825 12.0566 21.7825ZM17.5256 14.4276C17.2263 14.2777 15.7581 13.5575 15.4813 13.4576C15.2057 13.3578 15.0005 13.3077 14.794 13.607C14.5889 13.9064 14.0195 14.576 13.842 14.7824C13.6644 14.9889 13.4869 15.0138 13.1876 14.864C12.8884 14.714 11.92 14.3966 10.7743 13.3703C9.87432 12.5671 9.26591 11.5747 9.08839 11.2754C8.91087 10.9761 9.06867 10.8109 9.2201 10.6582C9.35835 10.5225 9.52525 10.3037 9.67659 10.1262C9.82793 9.94869 9.87806 9.82367 9.97831 9.61716C10.0786 9.41065 10.0284 9.23313 9.9533 9.08328C9.87806 8.93342 9.27273 7.46467 9.01797 6.86637C8.76946 6.28306 8.51783 6.35673 8.33095 6.34735C8.15343 6.33859 7.94828 6.33672 7.74177 6.33672C7.53526 6.33672 7.20851 6.41195 6.93166 6.71125C6.65544 7.01054 5.88456 7.73078 5.88456 9.1995C5.88456 10.6682 6.95787 12.0871 7.10922 12.2936C7.25994 12.5001 9.25549 15.5483 12.2816 16.8415C13.0125 17.1503 13.5831 17.3363 14.0263 17.4745C14.7608 17.7036 15.4301 17.6702 15.9577 17.5932C16.5453 17.5067 17.7501 16.8664 18.0048 16.1686C18.2596 15.4707 18.2596 14.8725 18.1844 14.7824C18.1091 14.6923 17.9039 14.6424 17.5256 14.4276Z"})}),"966",e.distributer_id.phoneNumber]})]}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 ltr:text-left rtl:text-right",children:new Date(e.completed_at).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"})}),(0,r.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,r.jsx)("button",{onClick:()=>Q(e._id),className:"px-3 py-1 text-xs rounded-md bg-red-50 text-red-600 font-medium hover:bg-red-100 transition-colors",children:"حذف الطلب"})})]},e._id||s)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"8",className:"px-4 py-12 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("p",{className:"mt-4 text-lg font-medium text-gray-500",children:"لا توجد طلبات مكتملة"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"ستظهر الطلبات المكتملة هنا بمجرد توفرها"})]})})})})]}),K.length>10&&(0,r.jsx)("div",{className:"py-4 px-6 bg-white border-t border-gray-200",children:(0,r.jsxs)("nav",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,r.jsx)("button",{className:"px-4 py-2 border rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"السابق"}),(0,r.jsx)("button",{className:"ml-3 px-4 py-2 border rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"التالي"})]}),(0,r.jsx)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["عرض ",(0,r.jsx)("span",{className:"font-medium",children:K.length})," طلب"]})})})]})})]})})})]})}),"   "]})]})]})}},5763:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},9327:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("GitPullRequestArrow",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M5 9v12",key:"ih889a"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}]])},7493:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},8639:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},1354:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3100:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},9266:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},437:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},689:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[829,616,651,227,441,517,358],()=>s(3848)),_N_E=e.O()}]);