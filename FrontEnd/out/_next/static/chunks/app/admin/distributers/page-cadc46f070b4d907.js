(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{5965:(e,s,t)=>{Promise.resolve().then(t.bind(t,6419))},6419:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(5155),r=t(8173),l=t.n(r),i=t(2115),c=t(2651),n=t(6046),d=t(209);t(1092);var x=t(7936),o=t(437),h=t(7493),m=t(3100),p=t(8639),u=t(9266),y=t(9327),g=t(5763),j=t(1354);function f(){let[e,s]=(0,i.useState)(null),[t,r]=(0,i.useState)([]),[f,N]=(0,i.useState)(""),[v,b]=(0,i.useState)(!1),[w,k]=(0,i.useState)(!1),[A,M]=(0,i.useState)([]),[_,C]=(0,i.useState)(""),z=(0,n.useRouter)();(0,i.useEffect)(()=>{window.notyf=new d.zT({duration:5e3,position:{x:"left",y:"top"},types:[{type:"success",background:"green"},{type:"error",background:"#ff5e5e"}]})},[]),(0,i.useEffect)(()=>{let e=localStorage.getItem("user");s(e?JSON.parse(e):null)},[]),(0,i.useEffect)(()=>{(async()=>{try{let e=await c.A.get("".concat("http://localhost:2000","/distributers"));r(e.data)}catch(e){console.error("Error fetching distributors:",e),window.notyf.error("فشل في جلب بيانات السائقين")}})()},[]);let S=async e=>{if(window.confirm("هل أنت متأكد من رغبتك في حذف هذا الحساب؟ لا يمكن التراجع عن هذا الإجراء."))try{let s=await c.A.post("".concat("http://localhost:2000","/deleteUser"),{userId:e});200===s.status&&(window.notyf.success("تم حذف الحساب بنجاح"),fetchCustomers())}catch(e){console.error("Error deleting account:",e),alert("حدث خطأ أثناء محاولة حذف الحساب")}},L=t.filter(e=>e.phoneNumber.includes(f)),q=e=>{M(e.completed_orders_list||[]),C(e.fullname),k(!0)};return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>b(!1)}),(0,a.jsxs)("div",{className:"fixed top-0 right-0 h-full w-72 bg-white shadow-xl flex flex-col transition-transform duration-300 ease-in-out z-50 overflow-y-auto ".concat(v?"translate-x-0":"translate-x-full md:translate-x-0"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-100",children:[(0,a.jsx)("button",{onClick:()=>b(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-100",children:(0,a.jsx)(x.A,{size:20})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-blue-600",children:"لوحة تحكم "})]}),(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse mb-6",children:[(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,a.jsx)(o.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"مرحباً بك"}),(0,a.jsx)("p",{className:"font-medium text-gray-400",children:null==e?void 0:e.fullname})]})]})}),(0,a.jsxs)("nav",{className:"flex-1 p-5",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-400 mb-3 pr-3",children:"القائمة الرئيسية"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(l(),{href:"/admin/home",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الرئيسية"})]}),(0,a.jsxs)(l(),{href:"/admin/new_orders",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الطلبات الجديدة"})]}),(0,a.jsxs)(l(),{href:"/admin/orders",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(p.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الطلبات المكتملة"})]}),(0,a.jsxs)(l(),{href:"/admin/distributers",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg bg-blue-50 text-blue-600 font-medium",children:[(0,a.jsx)(u.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"السائقون"})]}),(0,a.jsxs)(l(),{href:"/admin/customers",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(o.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"العملاء"})]}),(0,a.jsxs)(l(),{href:"/admin/distributers_requests",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(y.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"طلبات السائقين"})]}),(0,a.jsxs)(l(),{href:"/admin/companies",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(g.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الشركات"})]})]}),(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-400 mt-8 mb-3 pr-3",children:"الإعدادات"}),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s(null),z.push("/login")},className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors w-full",children:[(0,a.jsx)(j.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"تسجيل خروج"})]})]})]}),(0,a.jsxs)("div",{className:"flex-grow transition-all duration-300 md:mr-72",children:[(0,a.jsx)("button",{className:"p-2 rounded-lg hover:bg-gray-100 md:hidden",onClick:()=>b(!v),children:(0,a.jsx)(x.A,{className:"w-6 h-6 text-gray-600"})}),(0,a.jsxs)("main",{className:"p-6",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"قائمة السائقون"})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:(0,a.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,a.jsx)("input",{type:"text",placeholder:"ابحث برقم الجوال",value:f,onChange:e=>N(e.target.value),className:"w-full px-4 py-2.5 pr-10 border-2 border-gray-200 rounded-lg text-right focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-colors text-gray-900"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,a.jsx)("div",{className:"overflow-x-auto -mx-6",children:(0,a.jsx)("div",{className:"inline-block min-w-full align-middle px-6",children:(0,a.jsx)("div",{className:"overflow-hidden border border-gray-200 md:rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"الاسم الكامل"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"رقم الجوال"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"البريد الإلكتروني"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"الرخصة"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"الطلبات الجارية"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"الطلبات المكتملة"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"مبالغ"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"اجراء"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:L.length>0?L.map((e,s)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.fullname}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.phoneNumber}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.email}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.request_data.drive_licence_number}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("span",{className:"px-2 py-1.5 bg-purple-50 text-purple-700 rounded-full text-sm font-medium",children:[e.waiting_orders," طلبات"]})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("button",{onClick:()=>q(e),className:"px-2 py-1.5 bg-purple-50 text-purple-700 rounded-full text-sm font-medium hover:bg-purple-100 transition-colors cursor-pointer",children:[e.completed_orders," طلبات"]})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("span",{className:"px-2 py-1.5 bg-green-50 text-green-700 rounded-full text-sm font-medium",children:[e.profits," ريال"]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("button",{onClick:()=>S(e._id),className:"px-3 py-1.5 bg-red-50 text-red-600 rounded-md text-sm font-medium transition-colors hover:bg-red-100",children:"حذف الحساب"})})]},e._id||s)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"8",className:"px-4 py-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("svg",{className:"w-12 h-12 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("p",{className:"mt-4 text-lg font-medium text-gray-500",children:"لا يوجد سائقين"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"لم نجد سائقين برقم الجوال المدخل"})]})})})})]})})})})]})})]})]}),w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",onClick:()=>k(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-4xl overflow-hidden animate-scale-in",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 p-4 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"قائمة الطلبات للسائق"}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"text-white hover:bg-blue-700/50 rounded-full p-1.5 transition-colors","aria-label":"إغلاق",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 130px)"},children:A.length>0?(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"رقم الطلب"}),(0,a.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"تفاصيل الطلب"}),(0,a.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"صورة التسليم"}),(0,a.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"المبلغ"}),(0,a.jsx)("th",{scope:"col",className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"تاريخ التسليم"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map((e,s)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["#",e.order_id]})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:["كرتون ماء ",e.selectedSize]}),(0,a.jsxs)("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-800",children:[e.quantity," كرتون"]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.company}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:[e.city," - ",e.district," - ",e.street]}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700",children:e.mosque})]})}),(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)("div",{className:"relative group",children:(0,a.jsx)("img",{src:e.image,alt:"صورة التسليم",className:"h-16 w-16 object-cover rounded-md border border-gray-200 transition-transform group-hover:scale-105 cursor-pointer",onClick:()=>window.open(e.image,"_blank")})})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 space-x-reverse",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.totalPrice}),(0,a.jsx)("img",{className:"h-4 w-auto",src:"/images/Saudi_Riyal_Symbol.svg",alt:"ريال سعودي"})]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.completed_at).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"})})]},e._id||s))})]}):(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"لا توجد طلبات"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"لا توجد طلبات مكتملة لهذا السائق"})]})})]})})]})}},5763:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},9327:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("GitPullRequestArrow",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M5 9v12",key:"ih889a"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}]])},7493:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},8639:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},1354:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3100:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},9266:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},437:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[829,616,651,227,441,517,358],()=>s(5965)),_N_E=e.O()}]);