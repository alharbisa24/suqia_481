(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16],{958:(e,s,t)=>{Promise.resolve().then(t.bind(t,9789))},9789:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(5155),a=t(8173),l=t.n(a),c=t(2115),n=t(2651),i=t(6046),d=t(209);t(1092);var o=t(7936),x=t(437),h=t(7493),m=t(3100),u=t(8639),p=t(9266),y=t(9327),g=t(5763),f=t(1354),j=t(33);function v(){let[e,s]=(0,c.useState)(null),[t,a]=(0,c.useState)([]),[j,v]=(0,c.useState)(""),[b,N]=(0,c.useState)(!1),k=(0,i.useRouter)();(0,c.useEffect)(()=>{window.notyf=new d.zT({duration:5e3,position:{x:"left",y:"top"},types:[{type:"success",background:"green"},{type:"error",background:"#ff5e5e"}]})},[]);let w=t.filter(e=>e.phoneNumber.includes(j)),A=async()=>{try{let e=await n.A.get("".concat("https://suqia-481.onrender.com","/users"));a(e.data)}catch(e){console.error("Error fetching customers:",e),window.notyf.error("فشل في جلب بيانات العملاء")}};(0,c.useEffect)(()=>{let e=localStorage.getItem("user");s(e?JSON.parse(e):null),A()},[]);let M=async e=>{if(window.confirm("هل أنت متأكد من رغبتك في حذف هذا الحساب؟ لا يمكن التراجع عن هذا الإجراء."))try{let s=await n.A.post("".concat("https://suqia-481.onrender.com","/deleteUser"),{userId:e});200===s.status&&(window.notyf.success("تم حذف الحساب بنجاح"),A())}catch(e){console.error("Error deleting account:",e),alert("حدث خطأ أثناء محاولة حذف الحساب")}};return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[b&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>N(!1)}),(0,r.jsxs)("div",{className:"fixed top-0 right-0 h-full w-72 bg-white shadow-xl flex flex-col transition-transform duration-300 ease-in-out z-50 overflow-y-auto ".concat(b?"translate-x-0":"translate-x-full md:translate-x-0"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-100",children:[(0,r.jsx)("button",{onClick:()=>N(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-100",children:(0,r.jsx)(o.A,{size:20})}),(0,r.jsx)("h2",{className:"text-xl font-bold text-blue-600",children:"لوحة تحكم "})]}),(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse mb-6",children:[(0,r.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,r.jsx)(x.A,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"مرحباً بك"}),(0,r.jsx)("p",{className:"font-medium text-gray-400",children:null==e?void 0:e.fullname})]})]})}),(0,r.jsxs)("nav",{className:"flex-1 p-5",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-400 mb-3 pr-3",children:"القائمة الرئيسية"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)(l(),{href:"/admin/home",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(h.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"الرئيسية"})]}),(0,r.jsxs)(l(),{href:"/admin/new_orders",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(m.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"الطلبات الجديدة"})]}),(0,r.jsxs)(l(),{href:"/admin/orders",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(u.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"الطلبات المكتملة"})]}),(0,r.jsxs)(l(),{href:"/admin/distributers",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(p.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"السائقون"})]}),(0,r.jsxs)(l(),{href:"/admin/customers",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg bg-blue-50 text-blue-600 font-medium",children:[(0,r.jsx)(x.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"العملاء"})]}),(0,r.jsxs)(l(),{href:"/admin/distributers_requests",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(y.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"طلبات السائقين"})]}),(0,r.jsxs)(l(),{href:"/admin/companies",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(g.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"الشركات"})]})]}),(0,r.jsx)("div",{className:"text-xs font-semibold text-gray-400 mt-8 mb-3 pr-3",children:"الإعدادات"}),(0,r.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s(null),k.push("/login")},className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors w-full",children:[(0,r.jsx)(f.A,{className:"w-5 h-5"})," ",(0,r.jsx)("span",{children:"تسجيل خروج"})]})]})]}),(0,r.jsxs)("div",{className:"flex-grow transition-all duration-300 md:mr-72",children:[(0,r.jsx)("button",{className:"p-2 rounded-lg hover:bg-gray-100 md:hidden",onClick:()=>N(!b),children:(0,r.jsx)(o.A,{className:"w-6 h-6 text-gray-600"})}),(0,r.jsxs)("main",{className:"p-6",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"العملاء"})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:(0,r.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,r.jsx)("input",{type:"text",placeholder:"ابحث برقم الجوال",value:j,onChange:e=>v(e.target.value),className:"w-full px-4 py-2.5 pr-10 border-2 border-gray-200 rounded-lg text-right focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition-colors text-gray-900"}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,r.jsx)("div",{className:"overflow-x-auto -mx-6",children:(0,r.jsx)("div",{className:"inline-block min-w-full align-middle px-6",children:(0,r.jsx)("div",{className:"overflow-hidden border border-gray-200 md:rounded-lg",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"الاسم الكامل"}),(0,r.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"رقم الجوال"}),(0,r.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"البريد الإلكتروني"}),(0,r.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"عدد الطلبات"}),(0,r.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"اجراء"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.length>0?w.map((e,s)=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.fullname}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.phoneNumber}),(0,r.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.email}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("span",{className:"px-2 py-1.5 bg-purple-50 text-purple-700 rounded-full text-sm font-medium",children:[e.orders_count," طلبات"]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("button",{onClick:()=>M(e._id),className:"px-3 py-1.5 bg-red-50 text-red-600 rounded-md text-sm font-medium transition-colors hover:bg-red-100",children:"حذف الحساب"})})]},e._id||s)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",className:"px-4 py-12 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("p",{className:"mt-4 text-lg font-medium text-gray-500",children:"لا يوجد عملاء"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"لم نجد عملاء بقاعدة البيانات"})]})})})})]})})})})]})})]})]})]})}function b(){return(0,r.jsx)(j.A,{allowedRoles:["admin"],redirectTo:"/",children:(0,r.jsx)(v,{})})}},33:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var r=t(5155),a=t(2115),l=t(6046),c=t(232);let n=e=>{let{allowedRoles:s,children:t,redirectTo:n="/"}=e,{user:i}=(0,c.J)(),d=(0,l.useRouter)(),[o,x]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){d.push("/login");return}let t=JSON.parse(e).rank;if(!s.includes(t)){d.push(n);return}x(!1)},[i,s,n,d]),o)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):t}},232:(e,s,t)=>{"use strict";t.d(s,{J:()=>n,v:()=>c});var r=t(5155),a=t(2115);let l=(0,a.createContext)(),c=e=>{let{children:s}=e,[t,c]=(0,a.useState)(null);return(0,r.jsx)(l.Provider,{value:{user:t,setUser:c},children:s})},n=()=>(0,a.useContext)(l)},5763:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},9327:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("GitPullRequestArrow",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M5 9v12",key:"ih889a"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}]])},7493:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},8639:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},1354:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3100:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},9266:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},437:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[829,616,651,227,441,517,358],()=>s(958)),_N_E=e.O()}]);