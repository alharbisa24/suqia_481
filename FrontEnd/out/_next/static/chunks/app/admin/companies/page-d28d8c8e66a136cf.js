(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{3023:(e,s,t)=>{Promise.resolve().then(t.bind(t,9048))},9048:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var a=t(5155),r=t(8173),l=t.n(r),c=t(2115),n=t(2651),i=t(6046),d=t(209);t(1092);var o=t(689),x=t(437),h=t(7493),u=t(3100),m=t(8639),p=t(9266),y=t(9327),g=t(5763),b=t(1354),f=t(7936);let j=(0,t(4057).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var v=t(33);function N(){let[e,s]=(0,c.useState)([]),[t,r]=(0,c.useState)(!1),[v,N]=(0,c.useState)(!1),[k,w]=(0,c.useState)({company:"",size:"200مل",quantity:0,price:20}),A=(0,i.useRouter)(),[M,q]=(0,c.useState)(null),[z,C]=(0,c.useState)(null),[S,_]=(0,c.useState)(0);(0,c.useEffect)(()=>{let e=localStorage.getItem("user");q(e?JSON.parse(e):null)},[]);let H=async()=>{try{let e=await n.A.get("".concat("https://suqia-481.onrender.com","/products"));s(e.data)}catch(e){console.error(e),E.error("فشل في جلب المنتجات")}};(0,c.useEffect)(()=>{H()},[]);let[E,I]=(0,c.useState)(null);(0,c.useEffect)(()=>{I(new d.zT({duration:3e3,position:{x:"left",y:"top"}}))},[]);let O=async e=>{e.preventDefault();try{await n.A.post("".concat("https://suqia-481.onrender.com","/products"),k),N(!1),H(),E.success("تم إضافة المنتج بنجاح")}catch(e){console.error(e),E.error("فشل في إضافة المنتج")}},J=async e=>{if(confirm("هل أنت متأكد من حذف هذا المنتج؟"))try{let s="".concat("https://suqia-481.onrender.com","/products/").concat(e);await n.A.delete(s),H(),E.success("تم حذف المنتج بنجاح")}catch(e){console.error(e),E.error("فشل في حذف المنتج")}},P=async e=>{try{let s="".concat("https://suqia-481.onrender.com","/products/").concat(e,"/quantity");await n.A.put(s,{quantity:S}),E.success("تم تحديث الكمية بنجاح"),C(null),H()}catch(e){console.error(e),E.error("فشل في تحديث الكمية")}};return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>r(!1)}),(0,a.jsxs)("div",{className:"fixed top-0 right-0 h-full w-72 bg-white shadow-xl flex flex-col transition-transform duration-300 ease-in-out z-50 overflow-y-auto ".concat(t?"translate-x-0":"translate-x-full md:translate-x-0"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-100",children:[(0,a.jsx)("button",{onClick:()=>r(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-100",children:(0,a.jsx)(o.A,{size:20})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-blue-600",children:"لوحة تحكم "})]}),(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse mb-6",children:[(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,a.jsx)(x.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"مرحباً بك"}),(0,a.jsx)("p",{className:"font-medium text-gray-400",children:null==M?void 0:M.fullname})]})]})}),(0,a.jsxs)("nav",{className:"flex-1 p-5",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-400 mb-3 pr-3",children:"القائمة الرئيسية"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(l(),{href:"/admin/home",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الرئيسية"})]}),(0,a.jsxs)(l(),{href:"/admin/new_orders",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(u.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الطلبات الجديدة"})]}),(0,a.jsxs)(l(),{href:"/admin/orders",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الطلبات المكتملة"})]}),(0,a.jsxs)(l(),{href:"/admin/distributers",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(p.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"السائقون"})]}),(0,a.jsxs)(l(),{href:"/admin/customers",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(x.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"العملاء"})]}),(0,a.jsxs)(l(),{href:"/admin/distributers_requests",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(y.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"طلبات السائقين"})]}),(0,a.jsxs)(l(),{href:"/admin/companies",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg bg-blue-50 text-blue-600 font-medium",children:[(0,a.jsx)(g.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"المنتجات"})]})]}),(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-400 mt-8 mb-3 pr-3",children:"الإعدادات"}),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),A.push("/login")},className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors w-full",children:[(0,a.jsx)(b.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"تسجيل خروج"})]})]})]}),(0,a.jsxs)("div",{className:"md:hidden bg-white shadow-sm p-4 flex justify-between items-center",children:[(0,a.jsx)("button",{onClick:()=>r(!0),className:"p-1 rounded-full hover:bg-gray-100",children:(0,a.jsx)(f.A,{size:24})}),(0,a.jsx)("h1",{className:"text-xl font-bold",children:"المنتجات"})]}),(0,a.jsxs)("div",{className:"flex-grow p-6 text-black relative z-10 md:pr-80",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"منتجات"}),(0,a.jsxs)("button",{onClick:()=>N(!0),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg flex items-center gap-2 transition-colors shadow-sm",children:[(0,a.jsx)(j,{size:18}),(0,a.jsx)("span",{children:"إضافة منتج جديد"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-right",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-200",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-sm font-medium text-gray-500",children:"اسم الشركة"}),(0,a.jsx)("th",{className:"px-6 py-4 text-sm font-medium text-gray-500",children:"الحجم"}),(0,a.jsx)("th",{className:"px-6 py-4 text-sm font-medium text-gray-500",children:"الكمية"}),(0,a.jsx)("th",{className:"px-6 py-4 text-sm font-medium text-gray-500",children:"المتبقي"}),(0,a.jsx)("th",{className:"px-6 py-4 text-sm font-medium text-gray-500",children:"السعر"}),(0,a.jsx)("th",{className:"px-6 py-4 text-sm font-medium text-gray-500",children:"إجراء"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"font-medium",children:e.company})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-gray-700",children:e.size})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-gray-700",children:e.quantity})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-gray-700",children:e.remaining_quantity})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-gray-700",children:e.price})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[z===e._id?(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("input",{type:"number",className:"border border-gray-300 px-2 py-1 rounded-md w-20 focus:outline-none focus:ring-2 focus:ring-blue-500",value:S,onChange:e=>_(parseInt(e.target.value)||0)}),(0,a.jsx)("button",{onClick:()=>P(e._id),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-2 py-1 rounded-md text-sm",children:"حفظ"}),(0,a.jsx)("button",{onClick:()=>C(null),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-2 py-1 rounded-md text-sm",children:"إلغاء"})]}):(0,a.jsx)("button",{onClick:()=>{C(e._id),_(e.quantity)},className:"bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:"تعديل الكمية"}),(0,a.jsx)("button",{onClick:()=>J(e._id),className:"bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:"حذف"})]})]},e.company))})]})})})]}),v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>N(!1)}),(0,a.jsxs)("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-xl shadow-2xl p-6 z-50 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"إضافة منتج جديد"}),(0,a.jsx)("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-500",children:(0,a.jsx)(o.A,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium",children:"اسم الشركة"}),(0,a.jsx)("input",{type:"text",className:"border border-gray-300 rounded-lg p-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",placeholder:"أدخل اسم الشركة",value:k.company,onChange:e=>w({...k,company:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium",children:"الحجم"}),(0,a.jsxs)("select",{className:"border border-gray-300 rounded-lg p-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",value:k.size,onChange:e=>w({...k,size:e.target.value}),required:!0,children:[(0,a.jsx)("option",{value:"200مل",children:"200مل"}),(0,a.jsx)("option",{value:"330مل",children:"330مل"}),(0,a.jsx)("option",{value:"600~550 مل",children:"600~550 مل"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium",children:"الكمية"}),(0,a.jsx)("input",{type:"number",className:"border border-gray-300 rounded-lg p-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",placeholder:"أدخل الكمية",value:k.quantity,onChange:e=>w({...k,quantity:parseInt(e.target.value)||0}),min:"0",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium",children:"السعر"}),(0,a.jsx)("input",{type:"number",className:"border border-gray-300 rounded-lg p-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-500 text-black",placeholder:"أدخل السعر",value:k.price,onChange:e=>w({...k,price:parseInt(e.target.value)||20}),min:"0",required:!0})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium transition-colors",children:"إضافة المنتج"})]})]})]})]})}function k(){return(0,a.jsx)(v.A,{allowedRoles:["admin"],redirectTo:"/",children:(0,a.jsx)(N,{})})}},33:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var a=t(5155),r=t(2115),l=t(6046),c=t(232);let n=e=>{let{allowedRoles:s,children:t,redirectTo:n="/"}=e,{user:i}=(0,c.J)(),d=(0,l.useRouter)(),[o,x]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){d.push("/login");return}let t=JSON.parse(e).rank;if(!s.includes(t)){d.push(n);return}x(!1)},[i,s,n,d]),o)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):t}},232:(e,s,t)=>{"use strict";t.d(s,{J:()=>n,v:()=>c});var a=t(5155),r=t(2115);let l=(0,r.createContext)(),c=e=>{let{children:s}=e,[t,c]=(0,r.useState)(null);return(0,a.jsx)(l.Provider,{value:{user:t,setUser:c},children:s})},n=()=>(0,r.useContext)(l)},5763:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},9327:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("GitPullRequestArrow",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M5 9v12",key:"ih889a"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}]])},7493:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},8639:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},1354:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3100:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},9266:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},437:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},689:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[829,616,651,227,441,517,358],()=>s(3023)),_N_E=e.O()}]);