(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{2020:(e,s,t)=>{Promise.resolve().then(t.bind(t,372))},372:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(5155),r=t(8173),l=t.n(r),c=t(2115),d=t(2651),i=t(6046),n=t(209);t(1092);var h=t(689),x=t(437),o=t(7493),m=t(3100),y=t(8639),p=t(9266),u=t(9327),g=t(5763),j=t(1354),f=t(7936);function v(){let[e,s]=(0,c.useState)(!1),[t,r]=(0,c.useState)(null),[v,N]=(0,c.useState)([]),b=(0,i.useRouter)();(0,c.useEffect)(()=>{let e=localStorage.getItem("user");r(e?JSON.parse(e):null)},[]),(0,c.useEffect)(()=>{(null==t?void 0:t.id)&&"user"===t.rank&&b.push("/")},[t]),(0,c.useEffect)(()=>{window.notyf=new n.zT({duration:4e3,position:{x:"left",y:"top"},types:[{type:"success",background:"green",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",background:"#ff5e5e",icon:{className:"notyf__icon--error",tagName:"i"}}]}),k()},[]);let k=async()=>{try{let e=await d.A.get("".concat("http://localhost:2000","/distributer-requests"));N(e.data)}catch(e){window.notyf.error("فشل تحميل الطلبات")}},w=async e=>{try{await d.A.post("".concat("http://localhost:2000","/admin/approve_distributer_request"),{requestId:e}),window.notyf.success("تم قبول الطلب"),N(s=>s.filter(s=>s._id!==e))}catch(e){window.notyf.error("فشل في قبول الطلب")}};return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[e&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>s(!1)}),(0,a.jsxs)("div",{className:"fixed top-0 right-0 h-full w-72 bg-white shadow-xl z-50 transition-transform duration-300 ease-in-out overflow-y-auto ".concat(e?"translate-x-0":"translate-x-full md:translate-x-0"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-100",children:[(0,a.jsx)("button",{onClick:()=>s(!1),className:"md:hidden p-1 rounded-full hover:bg-gray-100",children:(0,a.jsx)(h.A,{size:20})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-blue-600",children:"لوحة تحكم"})]}),(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse mb-6",children:[(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,a.jsx)(x.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"مرحباً بك"}),(0,a.jsx)("p",{className:"font-medium text-gray-400",children:null==t?void 0:t.fullname})]})]})}),(0,a.jsxs)("nav",{className:"flex-1 p-5",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-400 mb-3 pr-3",children:"القائمة الرئيسية"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(l(),{href:"/admin/home",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(o.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الرئيسية"})]}),(0,a.jsxs)(l(),{href:"/admin/new_orders",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الطلبات الجديدة"})]}),(0,a.jsxs)(l(),{href:"/admin/orders",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(y.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الطلبات المكتملة"})]}),(0,a.jsxs)(l(),{href:"/admin/distributers",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(p.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"السائقون"})]}),(0,a.jsxs)(l(),{href:"/admin/customers",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(x.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"العملاء"})]}),(0,a.jsxs)(l(),{href:"/admin/distributers_requests",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg bg-blue-50 text-blue-600 font-medium",children:[(0,a.jsx)(u.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"طلبات السائقين"})]}),(0,a.jsxs)(l(),{href:"/admin/companies",className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(g.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"الشركات"})]})]}),(0,a.jsx)("div",{className:"text-xs font-semibold text-gray-400 mt-8 mb-3 pr-3",children:"الإعدادات"}),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),r(null),b.push("/login")},className:"flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-red-600 hover:bg-red-50 w-full",children:[(0,a.jsx)(j.A,{className:"w-5 h-5"})," ",(0,a.jsx)("span",{children:"تسجيل خروج"})]})]})]}),(0,a.jsxs)("div",{className:"flex-grow transition-all duration-300 md:mr-72",children:[(0,a.jsx)("button",{className:"p-2 rounded-lg hover:bg-gray-100 md:hidden",onClick:()=>s(!e),children:(0,a.jsx)(f.A,{className:"w-6 h-6 text-gray-600"})}),(0,a.jsxs)("main",{className:"p-6",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"طلبات السائقين"})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:(0,a.jsx)("div",{className:"overflow-x-auto -mx-6",children:(0,a.jsx)("div",{className:"inline-block min-w-full align-middle px-6",children:(0,a.jsx)("div",{className:"overflow-hidden border border-gray-200 md:rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"الاسم الكامل"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"رقم الجوال"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"المدينة"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"الحي"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"رقم الرخصة"}),(0,a.jsx)("th",{className:"py-3.5 px-4 text-sm font-medium text-right text-gray-700",children:"الإجراء"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:v.length>0?v.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.user_id.fullname}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.user_id.phoneNumber}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.city}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.district}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-900",children:e.drive_licence_number}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:(0,a.jsx)("button",{onClick:()=>w(e._id),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-1 rounded-full shadow",children:"قبول"})})]},e._id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"4",className:"px-4 py-12 text-center text-gray-500",children:"لا توجد طلبات حالياً"})})})]})})})})})]})]})]})}},5763:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},9327:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("GitPullRequestArrow",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M5 9v12",key:"ih889a"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}]])},7493:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},8639:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},1354:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3100:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},9266:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},437:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},689:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4057).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[829,616,651,227,441,517,358],()=>s(2020)),_N_E=e.O()}]);